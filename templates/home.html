{% extends "_layout.html" %}

{% block content%}
<div class="container">
  <div class="mt-3">
    <h1 style="text-align: center; font-family: 'Montserrat', sans-serif; font-weight:bold;">TWEETFLUENCER</h1><br />

    <div class="d-flex justify-content-center mt-3">
      <form class="form-inline" method="get">
        <div>
          <label class="sr-only" for="inlineFormInputName2">Name</label>
          <input name="city" type="text" class="form-control" id="inlineFormInputName2" placeholder="City">
        </div>

        <label class="sr-only" for="inlineFormInputGroupUsername2">Username</label>

        <select name="followers" class="custom-select ml-2" id="inlineFormCustomSelectPref">
          <option selected value="">Followers...</option>
          <option value="1">
            < 50 </option> <option value="2"> 50 - 80
          </option>
          <option value="3"> 81 - 100</option>
          <option value="4"> 100 < </option> </select> <button type="submit" class="btn btn-dark ml-2">
              Search</button>
              <a href="{url_for('index')}"><button class="btn btn-danger ml-2">Reset Filters</button></a>
      </form>
    </div>
    <div class="text-center">
      {% if request.args.get('city') %}
      <p><small>Results for {{ request.args.get('city') }} {{ request.args.get('followers') }}</small></p>
      {% else %}
      <p><small class="d-none">Pick a city</small></p>
      {% endif %}
    </div>

    <hr />
  </div>



  <table class="table">
    <thead>
      <tr>
        <!-- <th scope="col">#</th> -->
        <th class="text-center text-dark" scope="col"></th>
        <th class="text-center text-dark" style="font-size:20px;font-family: 'Raleway', sans-serif; font-weight:bold;"
          scope="col">
          Username
        </th>
        <th class="text-center text-dark" style="font-size:20px;font-family: 'Raleway', sans-serif; font-weight:bold;"
          scope="col">
          Profile Photo</th>
        <th class="text-center text-dark" style="font-size:20px;font-family: 'Raleway', sans-serif; font-weight:bold;"
          scope="col">
          Followers
        </th>
        <th class="text-center text-dark" style="font-size:20px;font-family: 'Raleway', sans-serif; font-weight:bold;"
          scope="col">
          Following
        </th>
        <th class="text-center text-dark" style="font-size:20px;font-family: 'Raleway', sans-serif; font-weight:bold;"
          scope="col">
          Location
        </th>
        <!-- <th class="text-center" scope="col">Hashtag</th> -->
        <!-- <th scope="col">Handle</th> -->
      </tr>
    </thead>

    <tbody>
      {% for user in users.items %}
      <tr class="text-center text-dark">
        <td>
          <div>
            <label><input type="checkbox" value=""></label>
          </div>
        </td>

        <td> <a class="text-info" style="font-size:20px;font-family: 'Lato', sans-serif;"
            href="https://twitter.com/{{ user.screen_name }}" target="_blank">{{ user.screen_name }} </a></td>
        <!-- Profile Photo Check/Display-->
        {% if user.profile_image_url %}
        <td class="text-center "> <a href="https://twitter.com/{{ user.screen_name }}" target="_blank"><img
              class="rounded-circle" style="height:100px;" src="{{ user.profile_image_url }}"></a></td>
        {% else %}
        <td class="text-center">
          <p>n/a</p>
        </td>
        {% endif%}

        <td style="font-size:20px;font-family: 'Lato', sans-serif;">{{ user.followers_count}}</td>
        <td style="font-size:20px;font-family: 'Lato', sans-serif;">{{ user.friends_count}}</td>
        <td style="font-size:20px;font-family: 'Lato', sans-serif;"> {{ user.location }}</td>
        <!-- <td> {{ user.hashtag_name }}</td> -->

      </tr>
      {% endfor %}
    </tbody>
  </table>

  <div class=text-center>
    <p>Total results: {{ users.total }} </p>
    {% for page_num in users.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
    {% if page_num %}
    {% if users.page == page_num %}
    <a class="btn btn-secondary mb-4" href="{{ url_for('index', page=page_num) }}">{{ page_num }} </a>
    {% else %}
    <a class="btn btn-outline-secondary mb-4" href="{{ url_for('index', page=page_num) }}">{{ page_num }}</a>
    {% endif %}
    {% else %}
    ...
    {% endif %}
    {% endfor %}
  </div>

  <div>
    <button class="save_to_csv_btn">Save to CSV</button>
  </div>

</div>

{% endblock %}